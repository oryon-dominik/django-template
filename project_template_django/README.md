# {{ project_name }}

Generated by 'django-admin startproject'.

Project dependencies are managed by [poetry](https://python-poetry.org/).
Realised as a django project.  

Read the project's [documentation](./documentation/index.md) for all details and how-to's.


## Setup & developing

- [How-to-clone-and-ssh](./documentation/for-developers/how-to-clone-and-ssh.md).
- [How-to-develop basics](./documentation/for-developers/how-to-develop.md).
- [jupyter notebooks for fast debugging](./documentation/for-developers/notebooks.md).


### Install dependencies

    # either install all requirements
    poetry install

    # cherry pick the ones you need
    poetry install --with authentication,restframework,vite --without postgres,paragons

    # or install only the root dependencies (updating the lock file)
    poetry install --only-root --sync


### Setup the project

    poetry run python commands.py setup
    poetry run python manage.py migrate


### Deployment

See the [documentation on deployments](./documentation/for-devops/deployment.md) for details.

### Pre-Commit hooks

[Pre-commit hooks](https://github.com/pre-commit/pre-commit-hooks) are defined
in `.pre-commit-config.yaml`. Adding them to the project will ensure that the
code is formatted and linted before committing. Repeat the installation
everytime you re-create the venv  

    poetry run pre-commit install

TODO: reactivate pyupgrade after the support for typing.Optional is added in 1.0 of typer

### Tests

Run [pytest](https://docs.pytest.org/).

    poetry run pytest


### Linter

Lint with [ruff](https://github.com/charliermarsh/ruff) and [flake8](https://github.com/PyCQA/flake8).

    poetry run ruff check .
    poetry run flake8


### Formatter

Autoformatting is enforced with industry-standard [black](https://github.com/psf/black).

    poetry run black --check .


### Type checker

Static type checking can be checked with [mypy](https://mypy-lang.org/).

    poetry run mypy --config-file pyproject.toml .


### gitflow

See the [documentation on releases](./documentation/releases.md) for details.


### postgresql via docker

- [postgres](https://www.postgresql.org/)
- [docker](https://www.docker.com/)
- [postgres image on dockerhub](https://hub.docker.com/_/postgres)

You might want to use the postgres docker container inside `compose/postgres.yml`  
Be aware that no other (local) postgres shall be running on the same port (`5432`), otherwise docker is known to introduce some hard to find conflicts - especially on windows machines using *wsl* as the hypervisor.  

Build and run

    docker compose -f compose/postgres.yml build
    docker compose -f compose/postgres.yml up

Bash-shell to container

    docker exec -it postgres /bin/bash

Edit `pg_hba.conf`

    apt-get update && apt install -y vim && vim /var/lib/postgresql/data/pg_hba.conf

DB-shell

    # linux
    docker compose run postgres psql -h localhost -U developer -d {{ project_name }}
    # windows
    docker compose run postgres psql -h host.docker.internal -U developer -d {{ project_name }}


## Preinstalled third party packages

### root (default)
- [msgspec](https://jcristharif.com/msgspec/)

### develop
- [jupyter](https://jupyter.org/)
- [typer](https://typer.tiangolo.com/)
- [ruff](https://github.com/charliermarsh/ruff)
- [pytest](https://docs.pytest.org/)
- [faker](https://faker.readthedocs.io/en/master/)

### django
- [django-readers](https://www.django-readers.org/)
- [django-hatchway](https://github.com/andrewgodwin/django-hatchway)
- [django-cripsy-forms](https://django-crispy-forms.readthedocs.io/)

### paragons
- [rich](https://github.com/Textualize/rich)
- [humanize](https://python-humanize.readthedocs.io/)
- [pendulum](https://pendulum.eustace.io/)
- [dill](https://github.com/uqfoundation/dill)
- [passlib](https://passlib.readthedocs.io/en/stable/)
- [httpx](https://www.python-httpx.org/)

### restframework
- [djangorestframework](https://www.django-rest-framework.org/)

### authentication
- [jose](https://github.com/mpdavis/python-jose)

### vite
- [django-vite](https://github.com/MrBin99/django-vite)

and many more..
